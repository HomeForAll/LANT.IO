"use strict";function authenticator(){$(".search-authenticator").remove(),$.ajax({method:"GET",url:"/api/authenticator/create/secret",dataType:"Json",success:function(e){console.log("data.response - ",e.response);var t=document.createElement("div"),a=document.createElement("div"),n=document.createElement("img"),s=document.createElement("input"),i=document.createElement("input"),r=document.createElement("button");t.className="authenticator-cl",a.innerHTML='Введите код<i class="fa fa-times" onclick="$(function() {$(\'.search-authenticator\').remove();})" aria-hidden="true"></i>',r.innerHTML="Отправить",n.setAttribute("src",e.response.qr_img_url),s.setAttribute("type","hidden"),s.setAttribute("placeholder","Hash"),i.setAttribute("type","text"),i.setAttribute("pattern","^[0-9]+$"),i.setAttribute("required","required"),s.value=e.response.secret_key,r.onclick=function(){$.ajax({method:"POST",url:"/api/authenticator/save",data:{secret_key:s.value,code:i.value},dataType:"Json"}).done(function(){var e=document.createElement("div");e.className="authenticator-true",e.innerHTML="Аутентификация подключена",i.value="",$(".contact-information button").html("Поключено"),t.innerHTML="",t.prepend(e),setTimeout(function(){t.style.display="none"},4e3)})},t.className="search-authenticator",$(".content").prepend(t),t.append(a,n,i,s,r)},error:function(e){console.log("Нет данных для аутентификации ",e)}})}var leftBar=!1;$(document).ready(function(){$.ajax({method:"GET",url:"/api/user?extend=1",dataType:"Json",success:function(e){console.log("Данные утентификации test - ",e.response),2===e.response.auth_2factor&&(console.log("Вы уже подключили 2-ую аутентификацию"),$(".contact-information button").html("Поключено").attr("disabled","disabled"))},error:function(e){console.log("Нет данных для утентификации test - ",e.response)}}),$.ajax({method:"GET",url:"/api/profile/get/profile",dataType:"Json",success:function(e){if(!e)return!1;$('input[name="name_name"]').val(e.name_name),$('input[name="name_patronymic"]').val(e.name_patronymic),$('input[name="name_surname"]').val(e.name_surname),$('input[name="name_birthday"]').val(e.name_birthday),$('input[name="passport_series"]').val(e.passport_series),$('input[name="passport_number"]').val(e.passport_number),$('input[name="adress_index"]').val(e.adress_index),$('input[name="adress_city"]').val(e.adress_city),$('input[name="adress_street"]').val(e.adress_street),$('input[name="adress_home"]').val(e.adress_home),$('input[name="adress_flat"]').val(e.adress_flat),$('input[name="about_me"]').val(e.about_me),$('input[name="contacts_number"]').val(e.contacts_number),$('input[name="contacts_email"]').val(e.contacts_email)},error:function(e){console.log("Данные не получены",e)}}),$("#edit-profile").submit(function(e){e.preventDefault();var t=$(this).serialize();if(""===$(".user-data input").val())return $(".header").append('<div class="message">Зарегистрируйтесь</div>'),setTimeout(function(){$(".message").fadeOut("slow",function(){$(this).remove()})},5e3),!1;$.ajax({method:"POST",url:"/api/profile/save/profile",dataType:"Json",data:t,success:function(){$(".header").append('<div class="message">отправлено</div>'),setTimeout(function(){$(".message").fadeOut("slow",function(){$(this).remove()})},5e3)},error:function(){console.log("Данные не отправлены",t)}})})}),$(document).ready(function(){$(".user-all-information").not(":first").hide(),$(".top-title .hash-tabs").click(function(){$(".top-title .hash-tabs").removeClass("active-hash").eq($(this).index()).addClass("active-hash"),$(".user-all-information").hide().eq($(this).index()).fadeIn()}).eq(0).addClass("active-hash"),$(".close").on("click",function(){leftBar=!leftBar,$(this).find("a").empty(),leftBar?($(".left-bar").fadeIn(),$(this).find("a").append('<i class="fa fa-angle-left" aria-hidden="true"></i>Назад')):($(".left-bar").fadeOut(),$(this).find("a").append('Открыть<i class="fa fa-angle-right" aria-hidden="true"></i>'))})});