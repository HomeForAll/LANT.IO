"use strict";function verificationOfRegistration(e){console.log("Проверяем регистрацию",e);var a=$(".main-message-block"),s=$('<div class="messageBlock">'+e+"</div>");a.prepend(s),setTimeout(function(){s.remove()},5e3)}function choiceBlock(e){if(!rootBlock)return!1;var a=$(".big-search-menu"),s=$(".big-search-menu-tenancy"),i=$("#blockToRent"),r=$("#Buy"),n=$(".search-menu-apartment");"toRent"===e?(i.css({background:"#5e9152"}).find("a").css({color:"#fff"}),r.css({background:"none"}).find("a").css({color:"#898989"}),a.css({display:"block"}),s.css({display:"none"})):(i.css({background:"none"}).find("a").css({color:"#898989"}),r.css({background:"#5e9152"}).find("a").css({color:"#fff"}),n.css({display:"none"}),a.css({display:"none"}),s.css({display:"block"}))}function showBigSearch(){var e=$(".big-search a i"),a=$(".big-search"),s=$(".search-menu-apartment"),i=$(".big-search-menu"),r=$(".big-search-menu-tenancy");return rootBlock=!0,choiceBlock(),s.css({display:"none"}),productSearch=!productSearch,productSearch?(e.remove(),a.html('<i class="fa fa-angle-left" aria-hidden="true"></i><a>Простой поиск</a>'),i.css({display:"block"}),r.css({display:"none"}),s.css({display:"none"}),rootBlock=!0,productSearch=!0):(e.remove(),a.html('<a>Расширенный поиск</a><i class="fa fa-angle-right" aria-hidden="true"></i>'),s.css({display:"block"}),i.css({display:"none"}),r.css({display:"none"}),rootBlock=!1,productSearch=!1)}function showTopMenuAndSearch(){var e=$(".user");showAndHideTopMenu=!showAndHideTopMenu,showAndHideTopMenu?(e.css({display:"block"}),showAndHideTopMenu=!0):(e.css({display:"none"}),showAndHideTopMenu=!1)}function filterOptionsApartments(e){var a={key_1:{newData:[{name:"Исходные параметры квартиры",img:"search-1",bar:0},{name:"Ремонт и обустройства",img:"search-2",bar:0},{name:"Характеристики дома",img:"search-3",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Квартира",size:4},key_2:{newData:[{name:"Параметры объекта",img:"search-1",bar:0},{name:"Ремонт и обустройства дома",img:"search-2",bar:0},{name:"Участок",img:"search-3",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Дом",size:4},key_3:{newData:[{name:"Исходные параметры квартиры",img:"search-1",bar:0},{name:"Внешний вид квартиры",img:"search-2",bar:0},{name:"Параметры здания",img:"search-3",bar:0},{name:"Исходные параметры",img:"search-4",bar:0},{name:"Документы",img:"search-1",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Комната",size:7},key_4:{newData:[{name:"Исходные параметры",img:"search-1",bar:0},{name:"Ремонт и обустройства",img:"search-2",bar:0},{name:"Документы",img:"search-1",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Земельный участок",size:4},key_5:{newData:[{name:"Основное",img:"search-1",bar:0},{name:"Ремонт и обустройства",img:"search-2",bar:0},{name:"Документы",img:"search-1",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Гараж/машиноместо",size:4},key_6:{newData:[{name:"Основное",img:"search-1",bar:0},{name:"Ремонт и обустройства",img:"search-2",bar:0},{name:"Документы",img:"search-1",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Офисная площадь",size:4},key_7:{newData:[{name:"Основные параметры",img:"search-1",bar:0},{name:"Обустройства",img:"search-2",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Отдельно стоящее здание",size:3},key_8:{newData:[{name:"Основное",img:"search-1",bar:0},{name:"Дополнительно",img:"search-4",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Комплекс ОСЗ",size:3},key_9:{newData:[{name:"Основное",img:"search-1",bar:0},{name:"Ремонт и обустройства",img:"search-2",bar:0},{name:"Документы",img:"search-1",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Рынок/Ярмарка",size:4},key_10:{newData:[{name:"Основное",img:"search-1",bar:0},{name:"Ремонт и обустройства",img:"search-2",bar:0},{name:"Документы",img:"search-1",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Производственно-складские помещения",size:4},key_11:{newData:[{name:"Основное",img:"search-1",bar:0},{name:"Ремонт и обустройства",img:"search-2",bar:0},{name:"Документы",img:"search-1",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Производственно-складские здания",size:4},key_12:{newData:[{name:"Основное",img:"search-1",bar:0},{name:"Ремонт и обустройства",img:"search-2",bar:0},{name:"Документы",img:"search-1",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Недвижимость для туризма и отдыха",size:4},key_13:{newData:[{name:"Основное",img:"search-1",bar:0},{name:"Ремонт и обустройства",img:"search-2",bar:0},{name:"Документы",img:"search-1",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Недвижимость для туризма и отдыха",size:4},key_14:{newData:[{name:"Основное",img:"search-1",bar:0},{name:"Ремонт и обустройства",img:"search-2",bar:0},{name:"Документы",img:"search-1",bar:0},{name:"Вложения",img:"search-1",bar:0}],id:"Недвижимость для туризма и отдыха",size:4}},s="",i=$(".value-text"),r=$(".render-building-parameters"),n="";switch(showFilter=!showFilter,r.empty(),blockFilterAndShadow.fadeIn(),e){case"key_1":s=a.key_1;break;case"key_2":s=a.key_2;break;case"key_3":s=a.key_3;break;case"key_4":s=a.key_4;break;case"key_5":s=a.key_5;break;case"key_6":s=a.key_6;break;case"key_7":s=a.key_7;break;case"key_8":s=a.key_8;break;case"key_9":s=a.key_9;break;case"key_10":s=a.key_10;break;case"key_11":s=a.key_11;break;case"key_12":s=a.key_12}if(void 0===i)return"";i.empty().prepend('<img src="/template/images/apartments.png" alt="icon">'+s.id),""!==s&&blockFilterAndShadow.fadeOut(),$.each(s.newData,function(e,a){n+='<li><img src="/template/images/'+a.img+'.png" alt="icon">'+a.name+"</li>"}),r.html(n)}function quickSearch(e){var a=$(".quick-search");e.preventDefault(),a.css({display:"block"}),$(".closeQuickSearch").on("click",function(e){e.preventDefault(),a.fadeOut("slow")})}function moreAndLess(e){var a=$(".metro-location img");return valueButton[e](),imagesWidth>150?imagesWidth=150:imagesWidth<100?imagesWidth=100:void a.css({width:+imagesWidth+"%",height:+imagesWidth+"%"})}function closeFixedBlock(){$(".warning").css({display:"block"})}function yandexMap(){var e=$("#address");ymaps.ready(function(){var a=new ymaps.Map("map",{center:[55.76,37.64],zoom:10,controls:["fullscreenControl","typeSelector","geolocationControl","zoomControl"]});e.on("change",function(){ymaps.geocode(e.val()).then(function(e){var s=e.geoObjects.get(0);a.geoObjects.removeAll(),a.geoObjects.add(s);var i=s.properties.get("boundedBy"),r=s.geometry.getCoordinates(),n=s.getCountry(),o=s.getAdministrativeAreas()[0],t=s.getLocalities(),c=s.getThoroughfare(),l=s.getPremiseNumber();a.setBounds(i,{checkZoomRange:!0}),ymaps.geocode(MapController.prototype.coordinates,{kind:"district"}).then(function(e){var a,s;void 0===e.geoObjects.get(0)?a=void 0:(a=e.geoObjects.get(0),s=a.properties.getAll().name);var s=a.properties.getAll().name;if("region"in MapController.options){var i=$(MapController.options.region),r=$("#region");i.text(""),i.text(s),r.val(""),r.val(s)}}),console.log(" --- Начало --- "),console.log("Адрес: "+s.getAddressLine()),console.log("Страна: "+n),console.log("Регион: "+o),console.log("Город: "+t),console.log("Улица: "+c),console.log("Дом №: "+l),console.log("Координаты: "+r),console.log(" --- Конец --- ")})}),window.suggests=new ymaps.SuggestView("address",{width:300,offset:[0,4],results:20})})}var productSearch,showAndHideTopMenu,boolean,rootBlock,showFilter,openMap=!1,blockFilterAndShadow=$(".property-type-apartment-settings, .decorativeShadowBlock"),imagesWidth=130,valueButton={more:function(){return imagesWidth+=10},less:function(){return imagesWidth-=10}};$(document).ready(function(){var e=io("http://91.202.180.160:8089?user_id=<?php echo $user_id; ?>&hash=<?php echo $hash; ?>"),a={1:"Зарегестрирован",2:"Не зарегистрирован"};e.disconnected?console.log("Нет подключения"):e.connected||console.log("Подключено"),verificationOfRegistration(e.uri?a[1]:a[2]),e.on("socket",function(e){JSON.stringify(e),console.log("Получили свежие бъявления",e)})}),$(function(){setInterval(function(){var e=window.pageYOffset,a=$(".show-hide-header"),s=$(".header"),i=$(".show-and-hide-menu"),r=$(".user");e>500?(a.fadeOut(function(){s.css({background:"none"})}),i.css({display:"block"}),r.css({position:"fixed",top:"inherit",button:"inherit",right:"0"})):(a.fadeIn(function(){s.css({background:"linear-gradient(to top, rgba(255, 255, 255, 0), rgba(0, 0, 0, 0.72)"})}),i.css({display:"none"}),r.css({position:"fixed",bottom:"65px",top:"75px",right:"10px"}))},1e3)}),$("#scene").parallax({calibrateX:!1,calibrateY:!0,invertX:!1,invertY:!0,limitX:!1,limitY:10,scalarX:2,scalarY:8,frictionX:.2,frictionY:.8,originX:0,originY:1}),$("select").styler({selectSearch:!0}),$(document).ready(function(){$(".bxslider").bxSlider({slideWidth:500,minSlides:1,maxSlides:2,moveSlides:2,slideMargin:10,pager:!1,auto:!0,infiniteLoop:!0}),$(".bxslider-partners").bxSlider({slideWidth:150,minSlides:1,maxSlides:5,moveSlides:2,slideMargin:50,pager:!1,auto:!0,pause:15e3,infiniteLoop:!0}),$(".apartments-wallpapers").bxSlider({slideWidth:70,minSlides:1,maxSlides:5,moveSlides:3,slideMargin:0,pager:!1,pause:2e4,auto:!0,infiniteLoop:!0})}),$(".more-settings").on("click",function(){$(".show-more-settings").fadeIn("slow",$(this).css({display:"block"}))}),$(".select").on("click",function(e){e.preventDefault(),$(".jq-selectbox__trigger-arrow").css({background:'url("/template/images/pointer_bottom.png") center right 5px no-repeat',"background-size":"auto"})}),$("#form_1").on("submit",function(){$(this).serialize(),renderAllApartments($(this))}),$("#form_2").on("submit",function(e){var a=$(this).serialize();e.preventDefault(),$.ajax({method:"POST",url:"/search",data:a,dataType:"Json",success:function(e){console.log("Собранные данные",e),renderAllApartments(e)},error:function(e){console.log("Ошибка отправки",e)}})}),$(".open-close-ad").click(console.log("Запустили")),$(function(){var e=$("#amountBefore"),a=$("#amountAfter"),s=$("#amountBeforeBy"),i=$("#amountAfterBy"),r=$("#amountBeforeSearch"),n=$("#amountAfterSearch");e.val("0"),a.val("20000"),s.val("0"),i.val("20000"),r.val("0"),n.val("20000"),$("#slider-range").slider({range:!0,min:0,max:2e7,values:[75,2e7],slide:function(s,i){e.val(i.values[0]),a.val(i.values[1])}}),$("#slider-range-buy").slider({range:!0,min:0,max:2e7,values:[75,2e7],slide:function(e,a){s.val(a.values[0]),i.val(a.values[1])}}),$("#slider-range-search").slider({range:!0,min:0,max:2e7,values:[75,2e7],slide:function(e,a){r.val(a.values[0]),n.val(a.values[1])}}),e.slider({values:0}),a.slider({values:1}),s.slider({values:0}),i.slider({values:1}),r.slider({values:0}),n.slider({values:1})}),ymaps.ready(function(){new ymaps.SuggestView("address",{width:300,offset:[0,4],results:20})});